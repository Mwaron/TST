import random
import time

#Import all the texts
f = open('Texts', 'r', encoding="utf-8")
sz = []
szvolt = []
for line in f:
    line = line.replace("\n", "")
    sz.append(line)


def norm_strings(s):
    return s.replace(' ', '')


def count_mistakes(given, users_input):
        s_given = norm_strings(given)
        s_typed = norm_strings(users_input)

        # Make it lowercase
        s_given = s_given.lower()
        s_typed = s_typed.lower()

        mistakes = 0
        # Compare up to the length of the longer string
        max_len = max(len(s_given), len(s_typed))
        for i in range(max_len):
            char_given = s_given[i] if i < len(s_given) else ''
            char_typed = s_typed[i] if i < len(s_typed) else ''

            if char_given != char_typed:
                mistakes += 1
        return mistakes

for line in sz:
    num = random.randint(0, len(sz))
    Curr_line = sz[num]

    #start timer
    start_time = time.time()
    print("Type the following sentence and press Enter when done:")
    print(Curr_line)
    input("Press Enter to start!")
    typed = input("Type here: ")
    mistakes = count_mistakes(Curr_line, typed)

    #end timer
    end_time = time.time()
    elapsed_time = end_time - start_time #Calculate the time it took to type the sentence


    if mistakes == 0:
        print(f"You typed the sentence correctly!\n")
    else:
        print(f"You typed the sentence incorrectly. {mistakes} characters were wrong.\n")


"""
for line in sz:
    # Get a random line then BUMMM
    num = random.randint(0, len(sz))
    Curr_line = sz[num]
    print("Type the following sentence and press Enter when done:")
    ready = input("Press Enter to start!")
    print(Curr_line)

    start_time = time.time()
    user_input = input("Type here: ")
    end_time = time.time()
    elapsed_time = end_time - start_time #Calculate the time it took to type the sentence

    # Give the user_input the max lenght so it won't be an error in the future that it isn't long enough
    user_input += len(Curr_line)*" "

    wrong = 0
    for i, c in enumerate(Curr_line):
        if c == user_input[i]:
            pass
        else:
            wrong += 1

    if wrong == 0:
        print(f"You typed the sentence correctly! Your time is {elapsed_time:.2f}!\n")
    else:
        print(f"You typed the sentence incorrectly. {wrong} characters were wrong. Your time is {elapsed_time:.2f}!\n")


    #print(f"Az első: {sz[num]}; A következő: {sz[num+1]}")
    sz.remove(sz[num])
    #print(f"Az első: {sz[num]}; A következő: {sz[num+1]}")
    
"""